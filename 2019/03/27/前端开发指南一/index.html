<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Tgroup"><link rel="alternative" href="/atom.xml" title="Tgroup" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>前端开发指南 - Tgroup</title><link rel="stylesheet" href="/tgroup/css/main.css"><link rel="stylesheet" href="/tgroup/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/tgroup/js/jquery-3.1.1.min.js"></script><script src="/tgroup/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/tgroup/">Tgroup</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/tgroup/archives">Catalog/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time class="post__time" datetime="2019-03-27T10:12:11.000Z">March 27, 2019</time><h1 class="post__title"><a href="/tgroup/2019/03/27/前端开发指南一/">前端开发指南</a></h1><div class="post__main echo"><h2 id="1-编码风格指南"><a href="#1-编码风格指南" class="headerlink" title="1. 编码风格指南"></a>1. 编码风格指南</h2><h3 id="建议写法"><a href="#建议写法" class="headerlink" title="建议写法"></a>建议写法</h3><p><strong>尾随逗号</strong><br>多行写法的对象，建议在尾属性后面加上逗号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// Example</span><br><span class="line">var foo = &#123;</span><br><span class="line">    bar: &quot;baz&quot;,</span><br><span class="line">    qux: &quot;quux&quot;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var foo = &#123;bar: &quot;baz&quot;, qux: &quot;quux&quot;&#125;;</span><br></pre></td></tr></table></figure></p>
<p><strong>不使用 console.log</strong><br>console.error 和 console.warn 通常用于函数中错误和警告的提示。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.error(&apos;error&apos;);</span><br><span class="line">console.warn(&apos;warn&apos;);</span><br></pre></td></tr></table></figure></p>
<h3 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h3><p><strong>在类方法中使用 this</strong><br>如果没有使用到 this，则该写到静态方法中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class A &#123;</span><br><span class="line">    foo() &#123;</span><br><span class="line">        this.bar = &quot;Hello World&quot;; // OK, this is used</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class A &#123;</span><br><span class="line">    constructor() &#123;</span><br><span class="line">        // OK. constructor is exempt</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class A &#123;</span><br><span class="line">    static foo() &#123;</span><br><span class="line">        // OK. static methods aren&apos;t expected to use this.</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>不要使用 alert, confirm 和 prompt</strong><br>应该使用更加友好的自定义 UI 交互。哪怕为此开发 UI 组件。通常 alert 用于开发调试，那么请在 production 版本将其移除。</p>
<p><strong>不要在 else 块使用 return</strong><br>如果 If 块包含返回语句，那么 else 块就没有必要了。它的内容可以放在外面的块。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">    if (x) &#123;</span><br><span class="line">      return y;</span><br><span class="line">    &#125;</span><br><span class="line">    return z;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>不使用隐式转换</strong><br>转换值类型的方法有很多，但是有一些可能不好读懂。例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var b = !!foo;</span><br><span class="line">var b = ~foo.indexOf(&quot;.&quot;);</span><br><span class="line">var n = +foo;</span><br><span class="line">var n = 1 * foo;</span><br><span class="line">var s = &quot;&quot; + foo;</span><br><span class="line">foo += ``;</span><br><span class="line"></span><br><span class="line">// 建议</span><br><span class="line">var b = Boolean(foo);</span><br><span class="line">var b = foo.indexOf(&quot;.&quot;) !== -1;</span><br><span class="line">var n = Number(foo);</span><br><span class="line">var n = Number(foo);</span><br><span class="line">var s = String(foo);</span><br><span class="line">foo = String(foo);</span><br></pre></td></tr></table></figure></p>
<p><strong>不要在循环内放进函数</strong><br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for (let results of data) &#123;</span><br><span class="line">    _.each(results, function (value, key) &#123;</span><br><span class="line">        // ......</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>储存 new 实例</strong><br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var person = new Person();</span><br><span class="line"></span><br><span class="line">// 不建议</span><br><span class="line">new Person();</span><br></pre></td></tr></table></figure></p>
<p><strong>不要直接修改实参</strong><br>直接修改实参，会使 arguments 对象发生变化，导致难以预料的错误。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function foo(bar) &#123;</span><br><span class="line">    bar = 13;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function foo(bar) &#123;</span><br><span class="line">    bar++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>不要使用 script url</strong><br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location.href = &apos;javascript: alert(&quot;hello&quot;)&apos;;</span><br></pre></td></tr></table></figure></p>
<p><strong>不要抛出错误字面值</strong><br>直接抛出错误字面值，会丢失错误栈。正确写法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">throw new Error();</span><br><span class="line"></span><br><span class="line">throw new Error(&quot;error&quot;);</span><br><span class="line"></span><br><span class="line">var e = new Error(&quot;error&quot;);</span><br><span class="line">throw e;</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">    throw new Error(&quot;error&quot;);</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">    throw e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>在顶部声明变量</strong><br>如果你使用的使 let 和 const，可以忽略这里。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function doSomething() &#123;</span><br><span class="line">    var first;</span><br><span class="line">    var second; //multiple declarations are allowed at the top</span><br><span class="line">    if (true) &#123;</span><br><span class="line">        first = true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function doSomething() &#123;</span><br><span class="line">    var i;</span><br><span class="line">    for (i=0; i&lt;10; i++) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p><strong>不在局部作用域重复声明全局变量</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var a = 3;</span><br><span class="line">function b() &#123;</span><br><span class="line">    var a = 10;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 允许该情况，因为 if 块中的 a 事先声明了。</span><br><span class="line">if (true) &#123;</span><br><span class="line">    let a = 3;</span><br><span class="line">    let b = 6;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let a = 5;</span><br></pre></td></tr></table></figure></p>
<p><strong>不要留着没有被使用的变量</strong><br>留着没有被使用过的变量，浪费内存，且不利于维护。</p>
<p><strong>使用变量前需要先声明</strong><br>不建议出现以下情况：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">alert(a);</span><br><span class="line">var a = 10;</span><br><span class="line"></span><br><span class="line">f();</span><br><span class="line">function f() &#123;&#125;</span><br><span class="line"></span><br><span class="line">function g() &#123;</span><br><span class="line">    return b;</span><br><span class="line">&#125;</span><br><span class="line">var b = 1;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    alert(c);</span><br><span class="line">    let c = 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Node-js-and-CommonJS"><a href="#Node-js-and-CommonJS" class="headerlink" title="Node.js and CommonJS"></a>Node.js and CommonJS</h3><p><strong>按模块类型分组</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// only require declarations (grouping off)</span><br><span class="line">var eventEmitter = require(&apos;events&apos;).EventEmitter,</span><br><span class="line">    myUtils = require(&apos;./utils&apos;),</span><br><span class="line">    util = require(&apos;util&apos;),</span><br><span class="line">    bar = require(getBarModuleName());</span><br><span class="line"></span><br><span class="line">// only non-require declarations</span><br><span class="line">var foo = 42,</span><br><span class="line">    bar = &apos;baz&apos;;</span><br><span class="line"></span><br><span class="line">// always valid regardless of grouping because all declarations are of the same type</span><br><span class="line">var foo = require(&apos;foo&apos; + VERSION),</span><br><span class="line">    bar = require(getBarModuleName()),</span><br><span class="line">    baz = require();</span><br></pre></td></tr></table></figure></p>
<p><strong>不使用合并路径</strong><br>请使用 path module。因为不同系统类型可能导致无效路径。例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var fullPath = __dirname + &quot;/foo.js&quot;;</span><br><span class="line">var fullPath = __filename + &quot;/foo.js&quot;;</span><br></pre></td></tr></table></figure></p>
<h3 id="编码风格"><a href="#编码风格" class="headerlink" title="编码风格"></a>编码风格</h3><p><strong>驼峰命名</strong><br>命名变量的时候，camelcase 和 underscores 用在不同情况下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// camelcase</span><br><span class="line">var myFavoriteColor   = &quot;#112C85&quot;;</span><br><span class="line">var _myFavoriteColor  = &quot;#112C85&quot;;</span><br><span class="line">var myFavoriteColor_  = &quot;#112C85&quot;;</span><br><span class="line">var MY_FAVORITE_COLOR = &quot;#112C85&quot;;</span><br><span class="line"></span><br><span class="line">// underscores 用在对象属性</span><br><span class="line">var obj = &#123;</span><br><span class="line">    my_pref: 1</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><strong>不使用匿名函数</strong><br>那么你可以在堆栈里跟踪到函数表达式的名称。</p>
<p><strong>缩进</strong><br>tab 和 space 缩进都是允许的，但是同一个项目内建议保持一种风格。<br>我们建议使用 4 spaces。</p>
<p><strong>大写字母开头的构造函数</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var friend = new Person();</span><br></pre></td></tr></table></figure></p>
<p><strong>不使用 continue</strong><br>在循环中滥用 continue 会降低代码的可测试性。建议使用结构化的控制流语句，例如 if。</p>
<p><strong>花括号之间不允许空格</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&apos;foo&apos;: &apos;bar&apos;&#125;;</span><br><span class="line">var obj = &#123;&apos;foo&apos;: &#123;&apos;bar&apos;: &apos;baz&apos;&#125;, &apos;qux&apos;: &apos;quxx&apos;&#125;;</span><br><span class="line">var obj = &#123;</span><br><span class="line">  &apos;foo&apos;: &apos;bar&apos;</span><br><span class="line">&#125;;</span><br><span class="line">var obj = &#123;&apos;foo&apos;: &apos;bar&apos;</span><br><span class="line">&#125;;</span><br><span class="line">var obj = &#123;</span><br><span class="line">  &apos;foo&apos;:&apos;bar&apos;&#125;;</span><br><span class="line">var obj = &#123;&#125;;</span><br><span class="line">var &#123;x&#125; = y;</span><br><span class="line">import &#123;foo&#125; from &apos;bar&apos;;</span><br></pre></td></tr></table></figure></p>
<h3 id="其它建议"><a href="#其它建议" class="headerlink" title="其它建议"></a>其它建议</h3><p><strong>字符串模版</strong><br>使用字符串模版连接字符串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str = &quot;Hello World!&quot;;</span><br><span class="line">var str = `Hello, $&#123;name&#125;!`;</span><br><span class="line">var str = `Time: $&#123;12 * 60 * 60 * 1000&#125;`;</span><br></pre></td></tr></table></figure></p>
<p><strong>最长代码行</strong><br>任何语言中非常长的代码行都很难读懂。为了提高可读性和可维护性，许多编码人员制定了一项约定，将代码行数限制在X个字符(传统上是80个字符)。</p>
<p><strong>限制单文件代码行数</strong><br>有些人认为大文件有代码味道。大型文件往往会做很多事情，并且很难跟上进度、难以维护。虽然现在并没有一个单文件最大行数的标准，但是不应该达到数千行。建议通常从100行到500行。</p>
<p><strong>限制函数最多参数</strong><br>函数的参数超过一定数量后，可能难以维护。你需要记住这个参数的意义、类型和顺序。因此我们建议当函数参数超过 3 个的时候，改为对象传入。</p>
<h2 id="2-代码注释规范"><a href="#2-代码注释规范" class="headerlink" title="2. 代码注释规范"></a>2. 代码注释规范</h2><h3 id="编写代码注释的必要性"><a href="#编写代码注释的必要性" class="headerlink" title="编写代码注释的必要性"></a>编写代码注释的必要性</h3><p>代码注释能帮助阅读者更好地阅读和理解代码。<br>良好的代码注释，满足以下两个条件：</p>
<ol>
<li>可阅读性，准确而简洁。</li>
<li>可维护性，易于修改，避免冗余。</li>
</ol>
<h3 id="注释类型"><a href="#注释类型" class="headerlink" title="注释类型"></a>注释类型</h3><ol>
<li>单行注释：通常放在代码块上方</li>
<li>文档类注释：API、类、函数（遵守 JSDOC 规范）</li>
<li>文件注释：文件头部书写固定格式的注释，注明作者、协议等信息</li>
</ol>
<h3 id="注释规范"><a href="#注释规范" class="headerlink" title="注释规范"></a>注释规范</h3><p>单行注释<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 获取 App 对象</span><br><span class="line">const APP = getApp()</span><br></pre></td></tr></table></figure></p>
<p>多行注释</p>
<blockquote>
<p>如果注释内容超过一行的时候，需要使用多行注释。多行注释请参考 <a href="http://www.css88.com/doc/jsdoc/index.html" target="_blank" rel="noopener">JSDOC 规范</a>。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Book类，代表一个书本.</span><br><span class="line"> * @constructor</span><br><span class="line"> * @param &#123;string&#125; title - 书本的标题.</span><br><span class="line"> * @param &#123;string&#125; author - 书本的作者.</span><br><span class="line"> */</span><br><span class="line">function Book(title, author) &#123;</span><br><span class="line">    this.title=title;</span><br><span class="line">    this.author=author;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>特殊标记</p>
<blockquote>
<p>当你解决或者待解决一个缺陷，需要注释的时候。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// @todo: 待完成某个功能</span><br><span class="line">function foo() &#123;</span><br><span class="line"> // write me</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// @fix: 解决了某个问题</span><br><span class="line">function foo() &#123;</span><br><span class="line"> // write me</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注释行上方空一行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 注释1</span><br><span class="line">const APP = getApp()</span><br><span class="line"></span><br><span class="line">// 注释2</span><br><span class="line">const PREFIX_URL = &apos;...&apos;</span><br></pre></td></tr></table></figure></p>
<p>注释内容和注释符之间的空格<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 注释1</span><br><span class="line">const APP = getApp()</span><br></pre></td></tr></table></figure></p>
<h2 id="3-代码自释规范"><a href="#3-代码自释规范" class="headerlink" title="3. 代码自释规范"></a>3. 代码自释规范</h2><h3 id="代码自释说明"><a href="#代码自释说明" class="headerlink" title="代码自释说明"></a>代码自释说明</h3><p>顾名思义：<strong>不需要注释，能够自解释的代码</strong><br>优秀的代码有优秀的注释。而不友好的代码会给阅读和调试带来困扰，有可能误导后续的开发。因此我们除了提供优秀的注释，可以通过某些编程规范、技术让代码具备自解释的特征。<br>让代码具备做到自解释需要具备以下三个特征：</p>
<ol>
<li>命名</li>
<li>语法</li>
<li>结构</li>
</ol>
<h3 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h3><p>描述数值变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const elementWidthPx = </span><br><span class="line">window.getComputedStyle(element, null).getPropertyValue(&apos;width&apos;);</span><br></pre></td></tr></table></figure></p>
<p>不使用 a 或者 b 描述变量，计数器除外。<br>遵循现有的命名规范。例如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const element = getElement();</span><br></pre></td></tr></table></figure></p>
<p>使用动词+对象构成来替代意义模糊的命名法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// Bad</span><br><span class="line">function handleFile()&#123;&#125;;</span><br><span class="line"></span><br><span class="line">// Good</span><br><span class="line">function sendFile()&#123;&#125;;</span><br></pre></td></tr></table></figure></p>
<p>返回值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function getPropertyValue()&#123;&#125;;</span><br></pre></td></tr></table></figure></p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>使用更具语义的表达：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// Bad</span><br><span class="line">isFunction &amp;&amp; doit();</span><br><span class="line"></span><br><span class="line">// Good</span><br><span class="line">if (isFunction) &#123;</span><br><span class="line"> doit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用大写字母+下划线组合的形式命名常量：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 地球赤道周长</span><br><span class="line">const EARTH_EQUATOR_LENGTH = 6378.2;</span><br></pre></td></tr></table></figure></p>
<p>函数应用中减少使用命名模糊的参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// Bad</span><br><span class="line">myThing.setData(&#123; x: 1 &#125;, true);</span><br><span class="line"></span><br><span class="line">// Good</span><br><span class="line">myThing.mergeData(&#123; x: 1 &#125;);</span><br></pre></td></tr></table></figure></p>
<p>使用语言自身提供的方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// Bad</span><br><span class="line">let ids = [];</span><br><span class="line">for(let i = 0; i &lt; things.length; i++) &#123;</span><br><span class="line">  ids.push(things[i].id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Good</span><br><span class="line">let ids = things.map(thing =&gt; thing.id);</span><br></pre></td></tr></table></figure></p>
<h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><p>适当的用函数名帮助解释：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var width = emToPixels(value);</span><br><span class="line">function emToPixels(ems) &#123;</span><br><span class="line">    return (ems - 0.5) * 16;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>适当用变量帮助表达式解释：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var isVisible = el.offsetWidth &amp;&amp; el.offsetHeight;</span><br><span class="line">if(!isVisible) &#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果你认为别人难以明白你的数学表达式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var multiplier = a * b;</span><br><span class="line">var divisor = c / d;</span><br><span class="line">return multiplier + divisor;</span><br></pre></td></tr></table></figure></p>
<p>将具备相同功能，有紧密关系的代码分到一组：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var foo = 1;</span><br><span class="line">bar(foo);</span><br><span class="line">quux(foo);</span><br><span class="line">blah()</span><br><span class="line">xyz();</span><br><span class="line">baz(1337);</span><br></pre></td></tr></table></figure></p>
<h2 id="4-开发工具"><a href="#4-开发工具" class="headerlink" title="4. 开发工具"></a>4. 开发工具</h2><p>本文使用 <a href="https://code.visualstudio.com/" target="_blank" rel="noopener">Visual Studio Code</a> 配置 <a href="https://eslint.org/" target="_blank" rel="noopener">ESLint</a> 实践 Javascript 编码规范。</p>
<blockquote>
<p>可以使用其它 <strong>IDE</strong> 或者<strong>编辑器</strong>，而 <strong>.eslintrc</strong> 文件是通用的。</p>
</blockquote>
<h3 id="配置-VSCode-ESLint"><a href="#配置-VSCode-ESLint" class="headerlink" title="配置 VSCode + ESLint"></a>配置 VSCode + ESLint</h3><p>安装 ESLint 扩展<br>打开 VSCode 面板并在<strong>扩展商店</strong>搜索 eslint ,通常是搜索结果列表的第一个。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
<th>作者</th>
</tr>
</thead>
<tbody>
<tr>
<td>ESLint</td>
<td>Integrates ESLint info VS Code</td>
<td>Drink Baeumer</td>
</tr>
</tbody>
</table>
<p>生成 <code>.eslintrc.js</code> 配置文件<br>首先全局安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm i eslint -g</span><br></pre></td></tr></table></figure></p>
<p>然后在硬盘上选择一个位置，执行以下命令，该命令会以询问的方式帮你配置并最后生成一个 <code>.eslintrc.js|json|yaml</code> 文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eslint --init</span><br></pre></td></tr></table></figure></p>
<p>覆盖 ESLint 配置<br>以 Mac OSX 为例，打开 Code-首选项-设置，编辑器会展开两列配置文件。分别是默认设置、用户设置。</p>
<blockquote>
<p>默认设置是 VSCode 或者扩展提供的，如果需要修改，在用户设置用相同的键值对覆盖它。</p>
</blockquote>
<p>请按下 command+F 打开搜索框，输入 eslint 并找到 <code>&quot;eslint.options&quot;:{}</code>，在用户设置添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> // 其它用户设置...</span><br><span class="line"> &quot;eslint.options&quot;: &#123;</span><br><span class="line">  &quot;configFile&quot;: &quot;[path].eslintrc.js&quot; // .eslintrc.js 在硬盘上的路径</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>让 ESLint 检查 Vue 单文件组件<br>第一步全局安装 <code>eslint-plugin-html</code>，让 eslint 支持 Vue 单文件的代码检测。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint-plugin-html -g</span><br></pre></td></tr></table></figure></p>
<p>然后打开编辑器的设置，在用户设置修改 eslint 的相关配置，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&quot;eslint.options&quot;: &#123;</span><br><span class="line">    &quot;configFile&quot;: &quot;[path].eslintrc.js&quot;,</span><br><span class="line">    &quot;plugins&quot;: [&quot;html&quot;]</span><br><span class="line">&#125;,</span><br><span class="line">&quot;eslint.validate&quot;: [</span><br><span class="line">    &quot;javascript&quot;,</span><br><span class="line">    &quot;html&quot;,</span><br><span class="line">    &quot;vue&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tgroup/tags/编码规范/">编码规范</a></li></ul></footer></article></main><footer class="foot"><div class="foot-copy">&copy; 2018 - 2019 Tgroup</div></footer><script src="/tgroup/js/scroller.js"></script><script src="/tgroup/js/main.js"></script></body></html>